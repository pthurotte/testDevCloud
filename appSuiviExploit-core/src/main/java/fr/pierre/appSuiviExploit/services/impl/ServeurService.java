package fr.pierre.appSuiviExploit.services.impl;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import fr.pierre.appSuiviExploit.domain.Serveur;
import fr.pierre.appSuiviExploit.dto.ServeurDto;
import fr.pierre.appSuiviExploit.repositories.ServeurRepository;
import fr.pierre.appSuiviExploit.services.IServeurService;
import fr.pierre.appSuiviExploit.utils.AppMapper;

@Service
@Transactional
public class ServeurService implements IServeurService {
	
	@Autowired
	private AppMapper mapper;

	@Autowired
	private ServeurRepository mServRepo;
	
	@Override
	public List<ServeurDto> getListAllServer() {
		List<Serveur> myList = mServRepo.findAll();
		
		List<ServeurDto> resultList = mapper.mapList(myList, ServeurDto.class);
		
		return resultList;
	}

	@Override
	public void addServer(ServeurDto pServeurDto) {
		Serveur vServeur=new Serveur();
		
		vServeur=mapper.map(pServeurDto, Serveur.class);
		
		mServRepo.save(vServeur);
		
	}

	@Override
	public ServeurDto getServerByIdx(Long number) {
		Serveur mServeur= mServRepo.findByIdx(number);
		
		ServeurDto vResult = mapper.map(mServeur, ServeurDto.class);
		
		return vResult;
		
	}

	@Override
	public void updateServer(ServeurDto pServeurDto) {
		Serveur vServeur = mServRepo.findOne(pServeurDto.getIdx());
		
		vServeur=mapper.map(pServeurDto, Serveur.class);
		
		mServRepo.save(vServeur);
		
	}

	@Override
	public void deleteServer(Long id) {
		mServRepo.delete(id);		
	}

}
